CREATE TABLE CIRUJANOS(
    ID_CIR NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    DIRECCION VARCHAR2(50) NOT NULL,
    ID_CIR_JEFE NUMBER(2),
    CONSTRAINT CIR_IDCIR_PK PRIMARY KEY(ID_CIR),
    CONSTRAINT CIR_IDCIRJEFE_FK FOREIGN KEY (ID_CIR) REFERENCES CIRUJANOS,
    CONSTRAINT CIR_NOMBRE_MAYUS CHECK(NOMBRE=UPPER(NOMBRE))
);

INSERT INTO CIRUJANOS VALUES(1, 'PACO ROBLES', 'SAN MARCOS, 4C, 2', 1);
    INSERT INTO CIRUJANOS VALUES(2, 'ROSA GUTIERREZ', 'SAN JULITO, 8c, 2', 2);
    INSERT INTO CIRUJANOS VALUES(3, 'FRANCISCO GOMEZ', 'SAN PEPITO, 12', NULL);
    INSERT INTO CIRUJANOS VALUES(4, 'JULIA MARTINEZ', 'SAN ALEJANDRO, 19', 4);
    INSERT INTO CIRUJANOS VALUES(5, 'ANGELICA GONZALEZ', 'SAN MARCOS, 11', NULL);

CREATE TABLE PERSONAL_LIMPIEZA(
    ID_PERSONAL_LIMPIEZA NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    TELEFONO NUMBER(9) NOT NULL,
   DIRECCION VARCHAR2(50) NOT NULL,
    CONSTRAINT PL_ID_PERSONAL_LIMPIEZA_PK PRIMARY KEY(ID_PERSONAL_LIMPIEZA),
    CONSTRAINT PL_NOMBRE_MAYUS CHECK(NOMBRE=UPPER(NOMBRE))
);

INSERT INTO PERSONAL_LIMPIEZA VALUES (1, 'RODRIGO JAVIER FERNANDEZ', 652356471, 'LOPEZ DE VEGA, 3');
    INSERT INTO PERSONAL_LIMPIEZA VALUES (2, 'LUCIA MADROÑAL', 652102071, 'FEDERICO, 13');
    INSERT INTO PERSONAL_LIMPIEZA VALUES (3, 'JAVIER GUTIERREZ', 651400540, 'VEGA, 4');
    INSERT INTO PERSONAL_LIMPIEZA VALUES (4, 'MARIA NUÑEZ ', 722541741, 'MOLINA, 103');

CREATE TABLE HABITACIONES(
    ID_HAB NUMBER(2) NOT NULL,
    OCUPADA NUMBER(1) NOT NULL,
    ID_PERSONAL_LIMPIEZA NUMBER(2) NOT NULL,
    CONSTRAINT HAB_ID_HAB_PK PRIMARY KEY(ID_HAB),
    CONSTRAINT HAB_ID_PERSONAL_LIMPIEZA_FK FOREIGN KEY(ID_PERSONAL_LIMPIEZA) REFERENCES PERSONAL_LIMPIEZA(ID_PERSONAL_LIMPIEZA)
);

INSERT INTO HABITACIONES VALUES (1, 0, 2);
    INSERT INTO HABITACIONES VALUES (2, 0, 2);
    INSERT INTO HABITACIONES VALUES (3, 1, 4);
    INSERT INTO HABITACIONES VALUES (4, 0, 3);
    INSERT INTO HABITACIONES VALUES (5, 1, 1);

CREATE TABLE PACIENTES(
    ID_PACIENTE NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    TELEFONO NUMBER(9) NOT NULL,
    DIRECCION VARCHAR2(50) NOT NULL,
    ID_HAB NUMBER(2),
    CONSTRAINT PAC_ID_PACIENTE_PK PRIMARY KEY(ID_PACIENTE),
    CONSTRAINT PAC_ID_ID_HAB_FK FOREIGN KEY(ID_HAB) REFERENCES HABITACIONES(ID_HAB),
    CONSTRAINT PAC_NOMBRE_MAYUS CHECK(NOMBRE=UPPER(NOMBRE))
);

INSERT INTO PACIENTES VALUES (1, 'JOAN SANZ MOLINA', 614230578, 'SAN JULIAN, 8', 1);
    INSERT INTO PACIENTES VALUES (2, 'ANTONIO VILA ALONSO', 612365789, 'ROBERTO, 1',2);
    INSERT INTO PACIENTES VALUES (3, 'FRANCISCO MOYA', 620356741, 'CABALLERO, 12', 4);
    INSERT INTO PACIENTES VALUES (4, 'CESAR CARRASCO', 698654123, 'VALLE INCLAN, 8', 3);
    INSERT INTO PACIENTES VALUES (5, 'RUBEN GALLARDO', 60023100, 'MEXICO, 20', 5);
    INSERT INTO PACIENTES VALUES (6, 'ENRIQUE PONS', 611333666, 'ROQUEFORD DE QUESO, 13', NULL);
    INSERT INTO PACIENTES VALUES (7, 'FRANCISCO MARTIN', 633554411, 'SALCHICHON, 9', NULL);

CREATE TABLE AUX_ENFERMERIA(
    ID_AUX NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    TELEFONO NUMBER(9) NOT NULL,
    DIRECCION VARCHAR2(50) NOT NULL,
    CONSTRAINT AUX_ID_AUX_PK PRIMARY KEY(ID_AUX),
    CONSTRAINT AUX_NOMBRE_MAYUS CHECK(NOMBRE=UPPER(NOMBRE))
);

INSERT INTO AUX_ENFERMERIA VALUES(1, 'KOKE RAMIREZ', 741256987, 'FRANCISCO, 12');
    INSERT INTO AUX_ENFERMERIA VALUES(2, 'FRANCISCO HEDIENDO', 641286987, 'SAN JULIAN BESTEIRO, 16');
    INSERT INTO AUX_ENFERMERIA VALUES(3, 'CARMEN MERINO', 741256987, 'JUGADORES DEL MADRID, 13');
    INSERT INTO AUX_ENFERMERIA VALUES(4, 'BRUNO GARRIDO', 741256987, 'ABRIGOS DE PIEL, 2');
    INSERT INTO AUX_ENFERMERIA VALUES(5, 'GABRIEL QUEMADO', 741256987, 'CAMISETAS DE LINO, 9');

CREATE TABLE OPERADOS(
    ID_AUX NUMBER(2) NOT NULL,
    ID_CIR NUMBER(2) NOT NULL,
    ID_PACIENTE NUMBER(2) NOT NULL,
    HORA VARCHAR2(7) NOT NULL,
    CONSTRAINT OP_ID_AUX_ID_CIR_ID_PAC_PK PRIMARY KEY(ID_AUX, ID_CIR, ID_PACIENTE),
    CONSTRAINT OP_ID_AUX_FK FOREIGN KEY(ID_AUX) REFERENCES AUX_ENFERMERIA(ID_AUX),
    CONSTRAINT OP_ID_CIR_FK FOREIGN KEY(ID_CIR) REFERENCES CIRUJANOS(ID_CIR),
    CONSTRAINT OP_ID_PACIENTE_FK FOREIGN KEY(ID_PACIENTE) REFERENCES PACIENTES(ID_PACIENTE)
    );

    INSERT INTO OPERADOS VALUES(1, 3, 1, '18:30');
    INSERT INTO OPERADOS VALUES(2, 1, 7, '10:30');
    INSERT INTO OPERADOS VALUES(1, 4, 7, '09:00');
    INSERT INTO OPERADOS VALUES(3, 5, 4, '08:30');
    INSERT INTO OPERADOS VALUES(5, 2, 3, '18:00');

CREATE TABLE TRATAMIENTOS (
    ID_TRATAMIENTO NUMBER(2) NOT NULL,
    DURACION VARCHAR(9) NOT NULL,
    DESCRIPCION VARCHAR(50) NOT NULL,
    CONSTRAINT TR_ID_TRATAMIENTO_FK PRIMARY KEY(ID_TRATAMIENTO)
);
    INSERT INTO TRATAMIENTOS VALUES (1, '5 Semanas', 'Tratamiento para fractura de cubito');
    INSERT INTO TRATAMIENTOS VALUES (2, '3 meses', 'Tratamiento para inflamación del riñón');
    INSERT INTO TRATAMIENTOS VALUES (3, '1 año', 'Tratamiento para fractura de columna');
    INSERT INTO TRATAMIENTOS VALUES (4, '4 Semanas', 'Tratamiento para rotura de tendon de biceps');
    INSERT INTO TRATAMIENTOS VALUES (5, '4 años', 'Tratamiento para fractura de vertebras');

CREATE TABLE MEDICOS_CABECERA(
    ID_MED NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    TELEFONO NUMBER(9) NOT NULL,
    DIRECCION VARCHAR2(50) NOT NULL,
    CONSTRAINT MC_ID_MED_PK PRIMARY KEY(ID_MED)
);
    INSERT INTO MEDICOS_CABECERA VALUES(1, 'BRUNO ROJAS', 698654123, 'SAN ROQUEFORD, 134');
    INSERT INTO MEDICOS_CABECERA VALUES(2, 'ALEJANDRO MERINO', 698654123, 'EL COCIDO, 11');
    INSERT INTO MEDICOS_CABECERA VALUES(3, 'ALBERTO ROJAS', 698654123, 'MARIO DE LAS HERAS, 4');
    INSERT INTO MEDICOS_CABECERA VALUES(4, 'SERGIO DEL MAZO', 698654123, 'KAKA, 14');
    INSERT INTO MEDICOS_CABECERA VALUES(5, 'GEANCARLO NEGRO', 698654123, 'CRISTIANO RONALDO, 7');

CREATE TABLE ADMINISTRADORES(
    ID_ADMIN NUMBER(2) NOT NULL,
    NOMBRE VARCHAR2(30) NOT NULL,
    TELEFONO NUMBER(9) NOT NULL,
    DIRECCION VARCHAR2(50) NOT NULL,
    CONSTRAINT AD_ID_ADMIN_PK PRIMARY KEY(ID_ADMIN)
);

    INSERT INTO ADMINISTRADORES VALUES (1, 'ADRIAN SCHAFER', 688989774, 'MALLORCA, 1');
    INSERT INTO ADMINISTRADORES VALUES (2, 'ALEJANDRO CASADO', 693582471, 'ESPAÑA, 4');
    INSERT INTO ADMINISTRADORES VALUES (3, 'PATRICIA FERNANDEZ', 652398741, 'CATALUNYA, 34');
    INSERT INTO ADMINISTRADORES VALUES (4, 'PABLO CHICO', 698745631, 'AVILA, 12');
    INSERT INTO ADMINISTRADORES VALUES (5, 'ROBERTO GUTIERREZ', 638745129, 'EXTREMADURA, 14');

CREATE TABLE CITACIONES(
    ID_CITACION NUMBER(2) NOT NULL,
    TIPO VARCHAR(20) NOT NULL,
    DESCRIPCION VARCHAR(40) NOT NULL,
    CONSTRAINT CIT_ID_CIT_ID_ADMIN_FEC_PK PRIMARY KEY (ID_CITACION)
);
    INSERT INTO CITACIONES VALUES (1, 'PEDIATRIA', 'Cita para pediatria');
    INSERT INTO CITACIONES VALUES (2, 'NEUMOLOGIA', 'Cita para neumologia');
    INSERT INTO CITACIONES VALUES (3, 'TRAUMATOLOGIA', 'Cita para traumatologia');
    INSERT INTO CITACIONES VALUES (4, 'TRAUMATOLOGIA', 'Cita para traumatologia');
    INSERT INTO CITACIONES VALUES (5, 'REUOMATOLOGIA', 'Cita para reumatologia');

 CREATE TABLE TIENEN_CITACIONES(
    	ID_PACIENTE NUMBER(2) NOT NULL,
    	ID_ADMIN NUMBER(2) NOT NULL,
    	ID_CITACION NUMBER(2) NOT NULL,
      FECHA_ATENDIDA DATE NOT NULL,

      CONSTRAINT TC_ID_PAC_AD_CIT_PK PRIMARY KEY (ID_PACIENTE, ID_ADMIN, ID_CITACION),
      CONSTRAINT TC_ID_ADMIN_FK FOREIGN KEY (ID_ADMIN) REFERENCES ADMINISTRADORES,
      CONSTRAINT TC_ID_PACIENTE_FK FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTES,
      CONSTRAINT TC_ID_CITACION_FK FOREIGN KEY (ID_CITACION) REFERENCES CITACIONES
    	);
    INSERT INTO TIENEN_CITACIONES VALUES (1,2,1, TO_DATE('20/05/2019', 'DD/MM/YYYY'));
    INSERT INTO TIENEN_CITACIONES VALUES (2,4,4, TO_DATE('10/02/2019', 'DD/MM/YYYY') );
    INSERT INTO TIENEN_CITACIONES VALUES (3,3,2, TO_DATE('11/03/2019', 'DD/MM/YYYY'));
    INSERT INTO TIENEN_CITACIONES VALUES (4,1,3, TO_DATE('20/05/2018', 'DD/MM/YYYY'));
    INSERT INTO TIENEN_CITACIONES VALUES (5,5,5, TO_DATE('19/04/2018', 'DD/MM/YYYY'));


CREATE TABLE PACIENTES_TRATAMIENTOS_MEDICOS (
      ID_PACIENTE NUMBER(2) NOT NULL,
      ID_MED NUMBER(2) NOT NULL,
      ID_TRATAMIENTO NUMBER(2) NOT NULL,
      CONSTRAINT PAM_ID_PAC_MED_TRAT_PK PRIMARY KEY (ID_PACIENTE, ID_MED, ID_TRATAMIENTO),
      CONSTRAINT PAM_ID_PACIENTE_FK FOREIGN KEY (ID_PACIENTE) REFERENCES PACIENTES,
      CONSTRAINT PAM_ID_MED_FK FOREIGN KEY (ID_MED) REFERENCES MEDICOS_CABECERA,
      CONSTRAINT PAM_ID_TRATAMIENTO_FK FOREIGN KEY (ID_TRATAMIENTO) REFERENCES TRATAMIENTOS
);

  INSERT INTO PACIENTES_TRATAMIENTOS_MEDICOS VALUES(1,3,5);
  INSERT INTO PACIENTES_TRATAMIENTOS_MEDICOS VALUES(2,4,1);
  INSERT INTO PACIENTES_TRATAMIENTOS_MEDICOS VALUES(3,1,2);
  INSERT INTO PACIENTES_TRATAMIENTOS_MEDICOS VALUES(4,2,4);
  INSERT INTO PACIENTES_TRATAMIENTOS_MEDICOS VALUES(5,5,3);

COMMIT;